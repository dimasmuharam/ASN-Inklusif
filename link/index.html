---
layout: default
title: "Pustaka Short Link ASN Inklusif"
permalink: /link/
---

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<div class="container" style="max-width: 1000px; margin: 40px auto; font-family: sans-serif;">

  <div style="text-align: center; margin-bottom: 40px;">
    <h1>üîó Pustaka Link & QR Code</h1>
    <p>Daftar tautan resmi (Short Link) ASN Inklusif.</p>
  </div>

  <div style="overflow-x: auto; background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border: 1px solid #ddd;">
    <table style="width: 100%; border-collapse: collapse;">
      <thead style="background: #f5f5f5; border-bottom: 2px solid #ddd;">
        <tr>
          <th style="padding: 15px; text-align: left;">Short Link</th>
          <th style="padding: 15px; text-align: left;">Tujuan (Target)</th>
          <th style="padding: 15px; text-align: center; width: 150px;">Aksi</th>
        </tr>
      </thead>
      <tbody>
        {% assign links = site.pages | where: "layout", "redirect" %}
        
        {% for item in links %}
        {% assign slug = item.name | remove: ".md" | remove: ".html" %}
        {% assign clean_url = "https://asninklusif.or.id/link/" | append: slug | append: "/" %}

        <tr style="border-bottom: 1px solid #eee;">
          <td style="padding: 15px;">
            <a href="{{ clean_url }}" target="_blank" style="font-weight: bold; color: #002b5c; text-decoration: none;">
              {{ clean_url }}
              <small style="font-size: 0.8em; color: #888;">‚Üó</small>
            </a>
          </td>
          
          <td style="padding: 15px; font-size: 0.9em; color: #555;">
            <div style="max-width: 350px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" title="{{ item.target }}">
              {{ item.target }}
            </div>
          </td>

          <td style="padding: 15px; text-align: center;">
            <button onclick="bukaModalQR('{{ clean_url }}')" 
                    style="background: #002b5c; color: white; border: none; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-size: 0.9em; display: inline-flex; align-items: center; gap: 5px;">
              üì± QR Code
            </button>
          </td>
        </tr>
        {% endfor %}

        {% if links.size == 0 %}
        <tr>
          <td colspan="3" style="text-align: center; padding: 30px; color: #666;">
            Belum ada link yang tersedia.
          </td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </div>

</div>

<div id="qrModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.8); backdrop-filter: blur(5px); align-items: center; justify-content: center;">
  
  <div style="background-color: #fefefe; margin: auto; padding: 30px; border: 1px solid #888; width: 90%; max-width: 400px; border-radius: 15px; text-align: center; position: relative; box-shadow: 0 10px 25px rgba(0,0,0,0.5);">
    
    <button onclick="tutupQR()" style="position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 24px; color: #555; cursor: pointer;">&times;</button>
    
    <h3 style="margin-top: 0; color: #002b5c;">Scan / Download QR</h3>
    
    <div id="qrCanvasArea" style="background: #fff; padding: 15px; border: 2px dashed #ddd; display: inline-block; border-radius: 8px; margin-bottom: 15px; min-height: 200px; display: flex; align-items: center; justify-content: center;">
        </div>
    
    <div>
        <input type="text" id="qrLinkText" readonly style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; text-align: center; background: #f9f9f9; font-size: 0.85em; margin-bottom: 10px; color: #555;">
        
        <button id="btnDownload" onclick="downloadQR()" style="background: #002b5c; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%; font-size: 1em;">
            ‚¨áÔ∏è Download Gambar QR
        </button>
    </div>
  </div>

</div>

<script>
// Variabel global untuk menyimpan URL saat ini
let currentQRUrl = "";

function bukaModalQR(urlLengkap) {
    const modal = document.getElementById("qrModal");
    const qrArea = document.getElementById("qrCanvasArea");
    const textInput = document.getElementById("qrLinkText");
    
    // 1. Bersihkan QR lama
    qrArea.innerHTML = "";
    currentQRUrl = urlLengkap;
    textInput.value = urlLengkap;

    // 2. Generate QR Baru (Library qrcode.js)
    // Ini membuat elemen <img> dengan format Base64 (Data URI)
    new QRCode(qrArea, {
        text: urlLengkap,
        width: 250,
        height: 250,
        colorDark : "#000000",
        colorLight : "#ffffff",
        correctLevel : QRCode.CorrectLevel.H
    });

    // 3. Tampilkan Modal
    modal.style.display = "flex";
}

function downloadQR() {
    // Cari elemen gambar yang baru saja digenerate oleh library
    const img = document.getElementById("qrCanvasArea").querySelector("img");
    
    if (img && img.src) {
        // Buat link download palsu
        const link = document.createElement('a');
        link.href = img.src; // Ini adalah Data URI (Base64), pasti bisa didownload
        // Nama file diambil dari slug URL agar rapi
        const filename = "QR-" + currentQRUrl.split('/').filter(Boolean).pop() + ".png";
        link.download = filename;
        
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    } else {
        alert("Tunggu sebentar, QR Code sedang dibuat...");
    }
}

function tutupQR() {
    document.getElementById("qrModal").style.display = "none";
}

// Tutup jika klik di luar area modal
window.onclick = function(event) {
    if (event.target == document.getElementById("qrModal")) {
        tutupQR();
    }
}
</script>